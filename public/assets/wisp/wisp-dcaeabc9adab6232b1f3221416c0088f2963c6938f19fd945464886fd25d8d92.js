function preload(){game.stage.backgroundColor=16777215,game.load.text("introTxt","http://dwells.co/gdesign/intro")}function create(){timer=game.add.text(700,32,"00:00",textStyle),timer.alpha=0,fadeIn(timer),plotButtonText="fall",plotButton=game.add.text(32,32,plotButtonText,{font:"24px Georgia",fill:"#000000",align:"center"}),plotButton.alpha=0,intro(),plotButton.inputEnabled=!0,plotButton.events.onInputDown.add(plotDown,this),plotButton.events.onInputOver.add(plotOver,this),plotButton.events.onInputOut.add(plotOut,this);var t=game.cache.getText("introTxt");logBuffer=t.split("\n"),stripBuffer()}function update(){if(updateTimer(),log.length>MAXLINES){for(var t=0;t<log.length;t++)fadeOut(log[t],1e3),0==log[t].alpha&&log[t].destroy();log.splice(0,log.length)}0==logBuffer.length&&game.state.start("intro")}function plotDown(){addLine(logBuffer[0]),logBuffer.splice(0,1)}function plotOver(){game.add.tween(plotButton).to({alpha:1},500,Phaser.Easing.Linear.None,!0,0,0,!1)}function plotOut(){game.add.tween(plotButton).to({alpha:.6},500,Phaser.Easing.Linear.None,!0,0,0,!1)}function stripBuffer(){for(;logBuffer[0].indexOf("BEGIN")<0;)logBuffer.splice(0,1);logBuffer.splice(0,1),logBuffer.splice(-4,4)}function fadeIn(t,e){game.add.tween(t).to({alpha:1},e,Phaser.Easing.Linear.None,!0,0,0,!1)}function fadeOut(t,e){game.add.tween(t).to({alpha:0},e,Phaser.Easing.Linear.None,!0,0,0,!1)}function addLine(t){var e=game.add.text(32,log.length%MAXLINES*20+96,t,style);e.alpha=0,fadeIn(e,1e3),log.push(e)}function updateTimer(){minutes=Math.floor(game.time.time/6e4)%60,seconds=Math.floor(game.time.time/1e3)%60,milliseconds=Math.floor(game.time.time)%100,10>milliseconds&&(milliseconds="0"+milliseconds),10>seconds&&(seconds="0"+seconds),10>minutes&&(minutes="0"+minutes),timer.setText(minutes+":"+seconds)}function intro(){var t=game.add.text(32,log.length%MAXLINES*20+96,"You're falling fast.",style);t.alpha=0,game.add.tween(t).to({alpha:1},1e3,Phaser.Easing.Linear.None,!0,1e3,-1,!0),log.push(t),game.add.tween(plotButton).to({alpha:.6},3e3,Phaser.Easing.Linear.None,!0,0,0,!1)}var game=new Phaser.Game(800,600,Phaser.AUTO,"wispDiv",{preload:preload,create:create,update:update}),style={font:"18px Georgia",fill:"#000000",align:"left"},log=[],MAXLINES=20;game.state.add("intro",introState);var textStyle={font:"12px Georgia",align:"center"},timer,milliseconds=0,seconds=0,minutes=0,plotButton,plotButtonText,logBuffer;